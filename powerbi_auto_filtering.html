// Focus function - THIS IS WHAT YOU'RE MISSING
function focusOnContainer(containerName) {
    if (!containerName) {
        console.log('No container selected, showing all');
        return;
    }

    const meshId = containerToMeshMapping[containerName];
    
    if (!meshId) {
        console.error(`Container mesh not found: ${containerName}`);
        console.log('Available containers:', Object.keys(containerToMeshMapping));
        return;
    }

    // Find mesh by MeshID in your scene
    const mesh = scene.children.find(obj => 
        obj.userData && obj.userData.meshId === meshId
    );

    if (mesh) {
        console.log('✅ Found mesh:', mesh);
        
        // Highlight selected container
        scene.children.forEach(obj => {
            if (obj.isMesh && obj.userData && obj.userData.meshId !== undefined) {
                if (obj === mesh) {
                    obj.material.opacity = 1.0;
                    obj.material.emissive = new THREE.Color(0x444444);
                } else {
                    obj.material.opacity = 0.3;
                    obj.material.emissive = new THREE.Color(0x000000);
                }
            }
        });

        // Focus camera on the selected mesh
        const distance = 8;
        camera.position.set(
            mesh.position.x + distance,
            mesh.position.y + distance * 0.7,
            mesh.position.z + distance
        );
        camera.lookAt(mesh.position);
        
        console.log('✅ Camera focused on:', containerName);
        
    } else {
        console.error(`❌ Mesh not found for MeshID: ${meshId}`);
        console.log('Available meshes:', scene.children.filter(obj => obj.isMesh).map(obj => ({
            name: obj.name,
            userData: obj.userData
        })));
    }
}

// Call the focus function after your scene is loaded
// Put this AFTER all your meshes are created
setTimeout(() => {
    if (selectedContainer) {
        focusOnContainer(selectedContainer);
    }
}, 100);
